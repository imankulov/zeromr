#!/usr/bin/env python
# -*- coding: utf-8 -*-
import time
import argparse
from zeromr.sender import Sender


def main():
    parser = argparse.ArgumentParser()
    parser.add_argument('--delay', type=int, default=2)
    parser.add_argument('-f', '--sources-file', required=True)
    parser.add_argument('--my-socket', default='tcp://127.0.0.1:5555')
    args = parser.parse_args()

    node = Sender(my_socket=args.my_socket)
    print('Starting sender with delay of {} sec'.format(args.delay))
    time.sleep(args.delay)
    with open(args.sources_file) as fd:
        source_list = [ line.strip() for line in fd.readlines() ]
    node.start(source_list)


if __name__ == '__main__':
    main()
